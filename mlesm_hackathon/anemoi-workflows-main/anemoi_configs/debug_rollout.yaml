defaults:
- data: zarr
- dataloader: native_grid
- datamodule: single
- diagnostics: evaluation
- hardware: atos
- graph: encoder_decoder_only
- model: transformer
- training: default
- _self_

config_validation: False

### This file is for local experimentation.
##  When you commit your changes, assign the new features and keywords
##  to the correct defaults.
# For example to change from default GPU count:
# hardware:
#   num_gpus_per_node: 1

diagnostics:
  log:
    mlflow:
      enabled: True
      offline: False
      terminal: True
hardware:
  accelerator: auto
  num_nodes: 1
  num_gpus_per_model: 1


model:
  num_channels: 1024
dataloader:
  limit_batches:
    training: 1000
    validation: 100

training:
  rollout:
    start: 1
    # increase rollout every n epochs
    epoch_increment: 1
    # maximum rollout to use
    max: 12
  max_epochs: 180
  max_steps: 312000
  lr:
    rate: 6.25e-5 # tests
    iterations: 300000
    min: 3e-7 #Not scaled by #GPU
  variable_loss_scaling:
    variable_groups:
      default: sfc
      pl: [q, t, u, v, w, z]
    default: 1
    q: 0.6 #1
    t: 6   #1
    u: 0.8 #0.5
    v: 0.5 #0.33
    w: 0.001
    z: 12  #1
    #sp: 10
    10u: 0.1
    10v: 0.1
    2d: 0.5
    tp: 0.025
    cp: 0.0025
